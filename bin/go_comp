#!/usr/bin/env python
#
# work for script "gocp", do path complete
#
import os, sys

def safels(path):
    ''' ls path/ , suppress Exception '''
    if path == '': path = './'
    try:
        return os.listdir(path)
    except:
        return []

def isdirempty(path):
    return len(safels(path)) == 0

def listpath(dir, stwith = ''):
    '''
    print files under path. if isdir, add slash after
    @stwith  string  start with
    @return  none
    '''
    dirs = []; files = []
    for d in safels(dir): 
        ''' filter files according "str:start with" '''
        if not d.startswith(stwith):
            continue

        abspath = os.path.join(dir, d)
        if os.path.isdir(abspath): 
            dirs.append(abspath)
        else:
            files.append(abspath)
    if len(dirs) == 1 and len(files) == 0:
        print dirs[0]+'/'
        print dirs[0]+'/.'
    else:
        for item in dirs:  print item+'/'
        for item in files: print item

if __name__ == '__main__':
    if len(sys.argv) > 2:
        sys.exit(1)
        
    if len(sys.argv) == 2:
        undone_path = sys.argv[1]
    else:
        undone_path = ''
    
    dir, halfname = os.path.split(undone_path)
    listpath(dir, halfname)  # stwith: start with

